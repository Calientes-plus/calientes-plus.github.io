<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Video Portfolio</title>
	<style>
		:root{--bg:#0f1724;--card:#0b1220;--accent:#00aff0;--muted:#9aa4b2;color-scheme:dark}
		html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#071021 0%,#071627 100%);color:#e6eef8}
		.wrap{max-width:1100px;margin:32px auto;padding:20px}
		header{display:flex;align-items:center;gap:16px;margin-bottom:20px}
		header h1{font-size:1.25rem;margin:0}
		.layout{display:grid;grid-template-columns:1fr 320px;gap:20px}
		.featured{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:12px;border-radius:10px;border:1px solid rgba(0,175,240,0.1);box-shadow:0 0 20px rgba(0,175,240,0.05)}
		.player{position:relative;width:100%;padding-bottom:56.25%;background:#000;border-radius:8px;overflow:hidden}
		.player iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0}
		.meta{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
		.meta .title{font-size:1.05rem;font-weight:600}
		.meta .date{color:var(--muted);font-size:0.9rem}
		.gallery{background:transparent;padding:12px;border-radius:10px}
		.thumbs{display:grid;grid-template-columns:1fr;gap:12px;overflow:auto;max-height:65vh;padding-right:6px}
		.card{display:flex;gap:10px;align-items:center;padding:8px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);cursor:pointer;border:1px solid rgba(0,175,240,0.2);transition:all 0.2s ease}
		.card img{width:110px;height:62px;object-fit:cover;border-radius:6px;flex-shrink:0}
		.card .cmeta{display:flex;flex-direction:column}
		.card .ctitle{font-weight:600}
		.badge{background:var(--accent);color:#000;padding:4px 8px;border-radius:999px;font-size:0.75rem;font-weight:700;box-shadow:0 0 12px rgba(0,175,240,0.4)}
		.latest-badge{margin-left:8px}
		footer{margin-top:26px;color:var(--muted);font-size:0.9rem}
		@media (max-width:900px){.layout{grid-template-columns:1fr}.thumbs{max-height:220px;grid-template-columns:repeat(3,1fr)}.card{flex-direction:column;align-items:flex-start}.card img{width:100%;height:62px}}
		
		/* Password lockscreen styles */
		#lockscreen {
			position: fixed;
			inset: 0;
			background: rgba(20,25,40,0.85);
			backdrop-filter: blur(8px);
			display: flex;
			justify-content: center;
			align-items: center;
			z-index: 9999;
		}
		.lockscreen-inner {
			background: rgba(17,19,30,0.96);
			border-radius: 10px;
			padding: 38px 30px 28px 30px;
			min-width: 250px;
			box-shadow: 0 2px 22px 0 rgba(0,0,0,0.18);
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 13px;
		}
		.lockscreen-inner input[type="password"] {
			border: none;
			outline: none;
			background: #111729;
			color: #e6eef8;
			padding: 10px 12px;
			border-radius: 5px;
			width: 170px;
			margin-bottom: 5px;
			font-size: 1em;
		}
		.lockscreen-inner button {
			padding: 8px 20px;
			border-radius: 6px;
			border: none;
			background: var(--accent);
			color: #fff;
			font-weight: bold;
			cursor: pointer;
			font-size: 1em;
			margin-top: 7px;
		}
		.lock-msg {
			color: var(--muted);
			font-size: 0.98rem;
			text-align: center;
		}
		.lock-error {
			color: #00aff0;
			font-size: 0.86rem;
			margin-top: 4px;
			height: 1.2em;
			text-align: center;
		}
		body.locked > #main-content {
			filter: blur(7px) brightness(0.7);
			pointer-events: none;
			user-select: none;
		}
	</style>
</head>
<body class="locked">
	<!-- Password Lock Screen -->
	<div id="lockscreen" aria-modal="true">
		<div class="lockscreen-inner">
			<div style="font-size:2em;line-height:1em; margin-bottom: 7px;">ðŸ”’</div>
			<div class="lock-msg">This page is locked.<br>Enter password to view.</div>
			<form id="lockform" autocomplete="off">
				<input type="password" id="lockpass" required placeholder="Password" autofocus autocomplete="off" />
				<br>
				<button type="submit">Unlock</button>
				<div class="lock-error" id="lock-error"></div>
			</form>
		</div>
	</div>

	<!-- Main Content Wrapper, will blur when locked -->
	<div class="wrap" id="main-content">
		<header>
			<h1>CALIENTESPLUS</h1>
			<div style="margin-left:auto;color:var(--muted)">Fra alle os til alle jer</div>
		</header>
		<main class="layout">
			<section class="featured">
				<div id="player" class="player" aria-live="polite">
					<!-- iframe injected by JS -->
				</div>
				<div class="meta">
					<div>
						<div id="feature-title" class="title">Loading...</div>
						<div id="feature-desc" class="date"></div>
					</div>
					<div id="feature-badge" class="badge" style="display:none">Latest</div>
				</div>
			</section>

			<aside class="gallery">
				<div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
					<strong>Videos</strong>
					<small style="color:var(--muted)">Andre calientesplus videoer</small>
				</div>
				<div id="thumbs" class="thumbs" role="list"></div>
			</aside>
		</main>
		<footer>
			Den seneste calientesplus video
		</footer>
	</div>

	<script>
		// ----------- Simple Lockscreen Logic -----------
		// Change 'secret123' below to your desired password.
		const LOCK_PASSWORD = 'secret123';
		const lockForm = document.getElementById('lockform');
		const lockInput = document.getElementById('lockpass');
		const lockError = document.getElementById('lock-error');
		const lockscreen = document.getElementById('lockscreen');
		const body = document.body;

		lockForm.addEventListener('submit', function(e){
			e.preventDefault();
			if(lockInput.value === LOCK_PASSWORD){
				lockscreen.style.display='none';
				body.classList.remove('locked');
				lockInput.value='';
				lockError.textContent='';
			}else{
				lockError.textContent='Incorrect password.';
				lockInput.value='';
				lockInput.focus();
			}
		});

		// Enter key on input field
		lockInput.addEventListener('keydown', function(e){
			if(e.key === "Enter"){
				lockForm.dispatchEvent(new Event('submit'));
			}
		});

		// Optionally: allow unlocking via URL hash, e.g. index.html#secret123
		if(location.hash && location.hash.slice(1) === LOCK_PASSWORD){
			lockscreen.style.display='none';
			body.classList.remove('locked');
		}

		// ----------- END Password Lock -------------

		// --- Video data loading ---
		// Try to load `videos.json` from the same folder. If it fails, fall back to the inline `videosInline`.
		const videosInline = [
			{ id: 'M7lc1UVf-VE', title: 'Example: YouTube API Demo', description: 'Replace with your video description.', date: '2025-11-29', latest: true }
		];

		// Utility: build thumbnail URL from YouTube id
		function thumbUrl(id){ return `https://img.youtube.com/vi/${id}/hqdefault.jpg`; }

		// Choose the featured video: first with latest===true, otherwise first in array
		function pickFeaturedIndex(list){
			const idx = list.findIndex(v => v.latest === true);
			return idx >= 0 ? idx : 0;
		}

		// Create and insert a sandboxed iframe for a YouTube embed when requested.
		// We use youtube-nocookie.com and parameters to minimize branding/links.
		// Note: It's not possible to 100% prevent users from reaching YouTube (it's external content).
		// These measures reduce obvious links and block top-level navigation from the iframe in
		// many browsers by omitting `allow-top-navigation` from the sandbox, but they may affect
		// some player features (fullscreen, keyboard controls). Test in your target browsers.
		function createIframeFor(video){
			const iframe = document.createElement('iframe');
			const params = new URLSearchParams({
				rel: '0', // don't show related videos from other channels
				modestbranding: '1', // reduce YouTube logo where possible
				controls: '1',
				disablekb: '1',
				playsinline: '1'
			});
			// Use the privacy-enhanced domain
			iframe.src = `https://www.youtube-nocookie.com/embed/${video.id}?${params.toString()}`;
			iframe.title = video.title || 'Video';
			iframe.setAttribute('loading','lazy');
			iframe.setAttribute('allow','accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share');
			iframe.setAttribute('allowfullscreen','');
			// sandbox: allow scripts + same-origin so the player works, but do NOT allow top-level navigation
			iframe.setAttribute('sandbox','allow-scripts allow-same-origin');
			return iframe;
		}

		// Feature a video: update metadata and embed iframe directly
		function featureVideo(list, index){
			const v = list[index];
			if(!v) return;
			document.getElementById('feature-title').textContent = v.title || '';
			document.getElementById('feature-desc').textContent = v.description ? v.description : (v.date || '');
			
			const player = document.getElementById('player');
			player.innerHTML = '';
			const iframe = createIframeFor(v);
			player.appendChild(iframe);
			
				// visual selected state update
				document.querySelectorAll('#thumbs .card').forEach((c, i)=>{
					c.style.outline = (i===index ? '2px solid rgba(0,175,240,0.4)' : 'none');
					c.style.boxShadow = (i===index ? '0 0 12px rgba(0,175,240,0.2)' : 'none');
				});
			document.getElementById('feature-badge').style.display = (v.latest ? 'inline-block' : 'none');
		}

		// Render thumbnails list
		function renderThumbs(list){
			const container = document.getElementById('thumbs');
			container.innerHTML = '';
			list.forEach((v, i)=>{
				const el = document.createElement('div');
				el.className = 'card';
				el.setAttribute('role','listitem');

				const img = document.createElement('img');
				img.src = thumbUrl(v.id);
				img.alt = v.title || 'Video thumbnail';

				const cm = document.createElement('div');
				cm.className = 'cmeta';
				const ct = document.createElement('div'); ct.className = 'ctitle'; ct.textContent = v.title || 'Untitled';
				const cd = document.createElement('div'); cd.style.color = 'var(--muted)'; cd.style.fontSize='0.85rem'; cd.textContent = v.date || '';
				cm.appendChild(ct); cm.appendChild(cd);

				el.appendChild(img); el.appendChild(cm);

				if(v.latest){
					const b = document.createElement('div'); b.className = 'badge latest-badge'; b.textContent = 'Latest';
					el.appendChild(b);
				}

				el.addEventListener('click',()=> featureVideo(list, i));
				container.appendChild(el);
			});
		}

		// Initialize: try to fetch videos.json, otherwise use inline list
		(async function(){
			let list = videosInline;
			try{
				const res = await fetch('videos.json', {cache: 'no-cache'});
				if(res.ok){
					const remote = await res.json();
					if(Array.isArray(remote) && remote.length>0){
						console.log('Loaded videos from videos.json:', remote);
						list = remote;
					}
				} else {
					console.warn('Failed to fetch videos.json: HTTP ' + res.status);
				}
			}catch(e){
				console.warn('Error loading videos.json, using inline:', e);
			}

			if(!list || list.length===0){
				document.getElementById('feature-title').textContent = 'No videos yet';
				return;
			}
			console.log('Using video list:', list);
			renderThumbs(list);
			const idx = pickFeaturedIndex(list);
			featureVideo(list, idx);
		})();
	</script>
</body>
</html>
